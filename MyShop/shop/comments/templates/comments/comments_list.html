{% extends 'main/home.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'comments/css/comments.css' %}">
{% endblock %}
{% block content %}
<h2>Відгуки ({{ comments.count }})</h2>

<div class="comments-container">
    <div class="comments-left">
        {% if comments %}
            <div class="comment-list">
                {% for comment in comments %}
                    <div class="comment-card">
                        <strong>{{ comment.user.username }}</strong>
                        <p>{{ comment.text }}</p>
                        <div class="rating">
                            {% for i in "12345" %}
                                {% if forloop.counter <= comment.rating %}
                                    ★
                                {% else %}
                                    ☆
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>Ще немає коментарів. Будьте першим!</p>
        {% endif %}
    </div>

  {% if user.is_authenticated %}
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Надіслати</button>
    </form>
{% else %}
    <p class="text-muted">
        Лише авторизовані користувачі можуть залишати коментарі.
        <a href="{% url 'login' %}">Увійдіть</a> або
        <a href="{% url 'register' %}">зареєструйтесь</a>.
    </p>
{% endif %}


</div>
{% endblock %}

